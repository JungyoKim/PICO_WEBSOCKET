import{w as P}from"./index.66019cba.js";import{B as M,C as B}from"./index.b39ab371.js";function A(s){return Object.prototype.toString.call(s)==="[object Date]"}function k(s,m,t,r){if(typeof t=="number"||A(t)){const n=r-t,e=(t-m)/(s.dt||1/60),f=s.opts.stiffness*n,o=s.opts.damping*e,d=(f-o)*s.inv_mass,i=(e+d)*s.dt;return Math.abs(i)<s.opts.precision&&Math.abs(n)<s.opts.precision?r:(s.settled=!1,A(t)?new Date(t.getTime()+i):t+i)}else{if(Array.isArray(t))return t.map((n,e)=>k(s,m[e],t[e],r[e]));if(typeof t=="object"){const n={};for(const e in t)n[e]=k(s,m[e],t[e],r[e]);return n}else throw new Error(`Cannot spring ${typeof t} values`)}}function S(s,m={}){const t=P(s),{stiffness:r=.15,damping:n=.8,precision:e=.01}=m;let f,o,d,i=s,c=s,l=1,w=0,b=!1;function j(y,p={}){c=y;const C=d={};return s==null||p.hard||g.stiffness>=1&&g.damping>=1?(b=!0,f=M(),i=y,t.set(s=c),Promise.resolve()):(p.soft&&(w=1/((p.soft===!0?.5:+p.soft)*60),l=0),o||(f=M(),b=!1,o=B(a=>{if(b)return b=!1,o=null,!1;l=Math.min(l+w,1);const h={inv_mass:l,opts:g,settled:!0,dt:(a-f)*60/1e3},D=k(h,i,s,c);return f=a,i=s,t.set(s=D),h.settled&&(o=null),!h.settled})),new Promise(a=>{o.promise.then(()=>{C===d&&a()})}))}const g={set:j,update:(y,p)=>j(y(c,s),p),subscribe:t.subscribe,stiffness:r,damping:n,precision:e};return g}export{S as s};
