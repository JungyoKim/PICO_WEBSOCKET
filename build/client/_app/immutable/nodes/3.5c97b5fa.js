import{s as ke,n as Ve,e as Ae,o as Te,b as Pe}from"../chunks/scheduler.19461008.js";import{S as je,i as Me,g as t,s as S,m as de,h as s,j as r,z as Y,c as E,f as l,n as ue,k as a,l as ve,a as Z,x as e,A as Ue,o as ge}from"../chunks/index.b39ab371.js";import{l as He}from"../chunks/index.e3f35709.js";import{s as Oe}from"../chunks/spring.5c907b37.js";function Re(c){let y,n,g,m,N="Admin",W,v,k="기기에 연결",A,w,f,x,h,C="Ultrasonic Sensor",B,T,J,K,i,p,O,R,b,d,_,D,I,q="Play Switch",F,V,P=c[2]===1?"Not Pressed":"Pressed",j,$,he,z,M,L,we="Cam Switch",fe,Q,X=c[3]===1?"Not Pressed":"Pressed",ee,te,pe,U,H,me,G,be,xe;return{c(){y=t("div"),n=t("div"),g=t("div"),m=t("h1"),m.textContent=N,W=S(),v=t("button"),v.textContent=k,A=S(),w=t("div"),f=t("div"),x=t("div"),h=t("h2"),h.textContent=C,B=S(),T=t("span"),J=de(c[0]),K=de("cm"),i=S(),p=t("div"),R=S(),b=t("div"),d=t("div"),_=t("div"),D=t("div"),I=t("h2"),I.textContent=q,F=S(),V=t("span"),j=de(P),he=S(),z=t("div"),M=t("div"),L=t("h2"),L.textContent=we,fe=S(),Q=t("span"),ee=de(X),pe=S(),U=t("div"),H=t("video"),me=S(),G=t("canvas"),this.h()},l(o){y=s(o,"DIV",{class:!0});var u=r(y);n=s(u,"DIV",{class:!0});var ye=r(n);g=s(ye,"DIV",{class:!0});var se=r(g);m=s(se,"H1",{class:!0,"data-svelte-h":!0}),Y(m)!=="svelte-zeosup"&&(m.textContent=N),W=E(se),v=s(se,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(v)!=="svelte-1nb7sup"&&(v.textContent=k),se.forEach(l),ye.forEach(l),u.forEach(l),A=E(o),w=s(o,"DIV",{class:!0});var Ce=r(w);f=s(Ce,"DIV",{class:!0});var le=r(f);x=s(le,"DIV",{class:!0});var ae=r(x);h=s(ae,"H2",{class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-hkgn8g"&&(h.textContent=C),B=E(ae),T=s(ae,"SPAN",{});var _e=r(T);J=ue(_e,c[0]),K=ue(_e,"cm"),_e.forEach(l),ae.forEach(l),i=E(le),p=s(le,"DIV",{id:!0,class:!0,style:!0}),r(p).forEach(l),le.forEach(l),Ce.forEach(l),R=E(o),b=s(o,"DIV",{class:!0});var oe=r(b);d=s(oe,"DIV",{class:!0});var ne=r(d);_=s(ne,"DIV",{class:!0});var De=r(_);D=s(De,"DIV",{class:!0});var ie=r(D);I=s(ie,"H2",{class:!0,"data-svelte-h":!0}),Y(I)!=="svelte-i9ihni"&&(I.textContent=q),F=E(ie),V=s(ie,"SPAN",{});var Se=r(V);j=ue(Se,P),Se.forEach(l),ie.forEach(l),De.forEach(l),he=E(ne),z=s(ne,"DIV",{class:!0});var Ee=r(z);M=s(Ee,"DIV",{class:!0});var re=r(M);L=s(re,"H2",{class:!0,"data-svelte-h":!0}),Y(L)!=="svelte-4o5s8h"&&(L.textContent=we),fe=E(re),Q=s(re,"SPAN",{});var Ie=r(Q);ee=ue(Ie,X),Ie.forEach(l),re.forEach(l),Ee.forEach(l),ne.forEach(l),pe=E(oe),U=s(oe,"DIV",{class:!0});var ce=r(U);H=s(ce,"VIDEO",{class:!0}),r(H).forEach(l),me=E(ce),G=s(ce,"CANVAS",{style:!0}),r(G).forEach(l),ce.forEach(l),oe.forEach(l),this.h()},h(){a(m,"class","text-2xl font-bold"),a(v,"class","px-4 py-2 bg-blue-500 text-white rounded-xl"),a(g,"class","flex items-center justify-between"),a(n,"class","container svelte-1fcslti"),a(y,"class","bg-gray-800 text-white p-4 mb-4"),a(h,"class","text-xl font-bold"),a(x,"class","flex items-center justify-between"),a(p,"id","output"),a(p,"class",O="h-5 w-full rounded-lg "+c[1]+" svelte-1fcslti"),ve(p,"width",c[8]+"%"),ve(p,"max-width","100%"),a(f,"class","bg-white p-4 rounded-xl shadow w-full"),a(w,"class","container max-w-screen mx-auto px-4 sm:px-6 md:px-8 svelte-1fcslti"),a(I,"class","text-xl font-bold"),a(D,"class","flex items-center justify-between mb-2"),a(_,"class",$="my-4 p-4 "+c[4]+" rounded-xl shadow svelte-1fcslti"),a(L,"class","text-xl font-bold"),a(M,"class","flex items-center justify-between mb-2"),a(z,"class",te="my-4 p-4 "+c[5]+" rounded-xl shadow svelte-1fcslti"),a(d,"class","flex-1 ml-0"),H.autoplay=!0,H.playsInline=!0,a(H,"class","w-full rounded-xl shadow"),ve(G,"display","none"),a(U,"class","my-4 md:ml-4"),a(b,"class","container flex-container flex-col-reverse md:flex-row svelte-1fcslti")},m(o,u){Z(o,y,u),e(y,n),e(n,g),e(g,m),e(g,W),e(g,v),Z(o,A,u),Z(o,w,u),e(w,f),e(f,x),e(x,h),e(x,B),e(x,T),e(T,J),e(T,K),e(f,i),e(f,p),Z(o,R,u),Z(o,b,u),e(b,d),e(d,_),e(_,D),e(D,I),e(D,F),e(D,V),e(V,j),e(d,he),e(d,z),e(z,M),e(M,L),e(M,fe),e(M,Q),e(Q,ee),e(b,pe),e(b,U),e(U,H),c[11](H),e(U,me),e(U,G),c[12](G),be||(xe=Ue(v,"click",c[10]),be=!0)},p(o,[u]){u&1&&ge(J,o[0]),u&2&&O!==(O="h-5 w-full rounded-lg "+o[1]+" svelte-1fcslti")&&a(p,"class",O),u&256&&ve(p,"width",o[8]+"%"),u&4&&P!==(P=o[2]===1?"Not Pressed":"Pressed")&&ge(j,P),u&16&&$!==($="my-4 p-4 "+o[4]+" rounded-xl shadow svelte-1fcslti")&&a(_,"class",$),u&8&&X!==(X=o[3]===1?"Not Pressed":"Pressed")&&ge(ee,X),u&32&&te!==(te="my-4 p-4 "+o[5]+" rounded-xl shadow svelte-1fcslti")&&a(z,"class",te)},i:Ve,o:Ve,d(o){o&&(l(y),l(A),l(w),l(R),l(b)),c[11](null),c[12](null),be=!1,xe()}}}let Ne=50;function qe(c,y,n){let g,m,N=0,W="bg-blue-500",v=0,k=0,A="bg-white",w="bg-white",f=Oe(0);Ae(c,f,i=>n(8,g=i));const x=["bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500","bg-indigo-500","bg-purple-500","bg-violet-800"];let h,C,B;Te(async()=>{B=C.getContext("2d"),navigator.mediaDevices.getUserMedia({video:!0}).then(i=>{n(6,h.srcObject=i,h)}).catch(i=>{console.error("There was an error getting user media:",i)})});async function T(){m=He();const i=await navigator.serial.requestPort();await i.open({baudRate:9600});let p=0,O=0;const R=async()=>{const d={ultrasonic:N};m.emit("ultrasonicData",d),setTimeout(R,0)};R();function b(d,_){return Math.random()*(_-d)+d}for(;i.readable;){const d=i.readable.getReader();try{for(;;){const{value:_,done:D}=await d.read();if(D)break;const I=new TextDecoder().decode(_),q=JSON.parse(I);if(isNaN(q.ultrasonic))continue;n(0,N=Math.round(q.ultrasonic)),f.set(N/Ne*100),console.log(f);const F=Math.floor(N/(Ne/x.length));if(n(1,W=x[F]||"bg-violet-800"),n(2,v=q.play_switch),n(3,k=q.cam_switch),p!==v&&v===0){n(4,A="bg-blue-500"),setTimeout(()=>n(4,A="bg-white"),1e3);const V=F+1,P=b(1,100),j={playlist:V,rtc:P};m.emit("playSwitchData",j)}if(O!==k&&k===0){n(5,w="bg-blue-500"),setTimeout(()=>n(5,w="bg-white"),1e3),B.drawImage(h,0,0,C.width,C.height);const V=C.toDataURL("image/png").replace("data:image/png;base64,",""),P=b(1,100),j={base64:V,rtc:P};m.emit("camSwitchData",j)}p=v,O=k}}catch{continue}finally{d.releaseLock()}}}function J(i){Pe[i?"unshift":"push"](()=>{h=i,n(6,h)})}function K(i){Pe[i?"unshift":"push"](()=>{C=i,n(7,C)})}return[N,W,v,k,A,w,h,C,g,f,T,J,K]}class Je extends je{constructor(y){super(),Me(this,y,qe,Re,ke,{})}}export{Je as component};
